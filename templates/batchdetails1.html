{% extends "extend.html" %}
{% block tittle %}Batch Details - ECOMM FLOW{%endblock tittle%}
{% block css %}
 <!-- Plugins css -->
      <!-- <link href="static/libs/flatpickr/flatpickr.min.css" rel="stylesheet" type="text/css" />
      <link href="static/libs/bootstrap-colorpicker/bootstrap-colorpicker.min.css" rel="stylesheet" type="text/css" />
      <link href="static/libs/clockpicker/bootstrap-clockpicker.min.css" rel="stylesheet" type="text/css" />
      <link href="static/libs/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" /> -->

       <!-- third party css -->
       <link href="static/libs/datatables/dataTables.bootstrap4.css" rel="stylesheet" type="text/css" />
       <link href="static/libs/datatables/responsive.bootstrap4.css" rel="stylesheet" type="text/css" />
       <link href="static/libs/datatables/buttons.bootstrap4.css" rel="stylesheet" type="text/css" />
       <link href="static/libs/datatables/select.bootstrap4.css" rel="stylesheet" type="text/css" />
       <!-- third party css end -->

       <!-- flat picker css -->
       <link href="static/libs/flatpickr/flatpickr.min.css" rel="stylesheet" type="text/css" />

      <!-- upper dropdown datepicker css -->
      <link href="static/libs/clockpicker/bootstrap-clockpicker.min.css" rel="stylesheet" type="text/css" />

       <link href="static/libs/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" />

      <!-- custom css -->
      <link rel="stylesheet" type="text/css" href="static/css/giftcard.css">



    <style>

    .p-datepicker {
        border: none !important;
    }
    .p-datepicker:focus {
        border: 1px solid;
    }

   select {
         border: none;
    }

    
    #cover-spin {
      text-align: center;
    font-size: large;
    /* top: 164px; */
    padding-top: 15%;
    position:fixed;
    width:100%;
    left:0;right:0;top:0;bottom:0;
    background-color: rgba(255,255,255,0.7);
    z-index:9999;
    display:none;
}

#cover-spin::after {
    content:'';
    display:block;
    position:absolute;
    left:48%;top:40%;
    width:40px;height:40px;
    border-style:solid;
    border-color:#3498db;
    border-top-color:transparent;
    border-width: 4px;
    border-radius:50%;
    -webkit-animation: spin .8s linear infinite;
    animation: spin .8s linear infinite;
}


   
   #snackbar {
     visibility: hidden;
     min-width: 250px;
     margin-left: -125px;
     background: #f7b84b !important;
     z-index: 999 !important;
     color: #000 !important;
     text-align: center;
     border-radius: 2px;
     padding: 16px;
     position: fixed;
     z-index: 1;
     left: 50%;
     top: 30px;
     font-size: 17px;
   }

   #snackbar.show {
     visibility: visible;
     -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
     animation: fadein 0.5s, fadeout 0.5s 2.5s;
   }

   @-webkit-keyframes fadein {
     from {top: 0; opacity: 0;}
     to {top: 30px; opacity: 1;}
   }

   @keyframes fadein {
     from {top: 0; opacity: 0;}
     to {top: 30px; opacity: 1;}
   }

   @-webkit-keyframes fadeout {
     from {top: 30px; opacity: 1;}
     to {top: 0; opacity: 0;}
   }

   @keyframes fadeout {
     from {top: 30px; opacity: 1;}
     to {top: 0; opacity: 0;}
   }

   #showselectedbox{
    position: relative;
    left: 12rem;
    top: 25px;
    border: 1px solid;
    border-radius: 5px;
    padding: 4px;
    display:none;
}

   

   

</style>
{% endblock css %}

{% block js %}

      <!-- Bootstrap Tables js -->
      <!-- <script src="static/libs/bootstrap-table/bootstrap-table.min.js"></script> -->
      <!-- Init js -->
      <!-- <script src="static/js/pages/bootstrap-tables.init.js"></script> -->

      <!-- bootstrap filter js -->
      <script src="static/libs/bootstrap-select/bootstrap-select.min.js"></script>



        <!---------- cell editable js ---------------->
       <!-- https://stackoverflow.com/questions/35869054/using-jeditable-and-getting-typeerror-editable-is-not-a-function-what-t -->
        <script src="http://www.appelsiini.net/download/jquery.jeditable.mini.js"></script>

        <!-- third party js -->
        <script src="static/libs/datatables/jquery.dataTables.min.js"></script>
        <script src="static/libs/datatables/dataTables.bootstrap4.js"></script>
        <script src="static/libs/datatables/dataTables.responsive.min.js"></script>
        <script src="static/libs/datatables/responsive.bootstrap4.min.js"></script>
        <script src="static/libs/datatables/dataTables.buttons.min.js"></script>
        <script src="static/libs/datatables/buttons.bootstrap4.min.js"></script>
        <script src="static/libs/datatables/buttons.html5.min.js"></script>
        <script src="static/libs/datatables/dataTables.keyTable.min.js"></script>

        

        <!-- third party js ends -->

        <!-- Datatables init -->
        <script src="static/js/pages/datatables.init.js"></script>

        <!-- App js -->
        <script src="static/js/app.min.js"></script>

        

        <!-- flatpicker js -->
        <script src="static/libs/flatpickr/flatpickr.min.js"></script>

        <!-- upper dropdown datepicker js -->
        <script src="static/libs/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>

        <!-- Sweetalert -->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>




{% endblock js %}
{% block body %}
<div id="snackbar">Some text some message..</div>
<div id="cover-spin">Please wait generating invoice</div>

         <!-- ============================================================== -->
         <!-- Start Page Content here -->
         <!-- ============================================================== -->
         <div class="content-page">
            <div class="content">
               <!-- Start Content-->
               <div class="container-fluid">
                  <!-- start page title -->
                  <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <h4 class="page-title">Batch Details</h4>
                            <div id="con-close-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title">Add Gift Card</h4>  
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                                        </div>
                                        {% for batchdata in batchlist_data %}
                                        <form action="/batchdetailsview/{{batchdata.id}}" id="form1" method="post">
                                            <div class="modal-body p-4">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="field-1" class="control-label">Retailers</label>
                                                                <select class=" form-control" id="field-1" name='retailers' required>
                                                                    <option value="Target">Target</option>
                                                                    <option value="Cabelas">Cabelas</option>
                                                                    <option value="Home Depot">Home Depot</option>
                                                                    <option value="Lowes">Lowes</option>
                                                                    <option value="Walmart">Walmart</option>
                                                                    <option value="Best Buy">Best Buy</option>
                                                                    <option value="B&N">B&N</option>
                                                                    <option value="Toys R Us">Toys R Us</option>
                                                                    <option value="Kohls">Kohls</option>
                                                                    <option value="Sams Club">Sams Club</option>
                                                                    <option value="DSG">DSG</option>
                                                                    <option value="Sears">Sears</option>
                                                                    <option value="Office Depot">Office Depot</option>
                                                                    <option value="Staples">Staples</option> 
                                                                </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="field-2" class="control-label">Gift Card</label>
                                                            <input onchange="changeCardno(this)" name='giftcardno' type="text" class="form-control" id="field-2" placeholder="Gift Card" required>
                                                        </div>
                                                        <div>
                                                            <span  style="color:red; font-size: 14px;" id ='giftcardno'></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                   <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="field-2" class="control-label">Gift Card Pin </label>
                                                            <input type="text" name='giftcardpin' class="form-control" id="field-2" placeholder="xyz" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                               <label for="field-3" class="control-label">Status</label>
                                                                <select name='status' class="form-control" required>
                                                                    <option >Status</option>
                                                                    <option value="Balance">Balance</option>
                                                                    <option value="No Balance">No Balance</option>
                                                                    <option value="Bad">Bad</option>
                                                                    <option value="Value Off">Value Off</option>
                                                                    <option value="Refunded">Refunded</option>
                                                                    <option value="Replaced">Replaced</option>
                                                                    <option value="Invalid">Invalid</option>
                                                                    <option value="Found Balance">Found Balance</option>
                                                                    <option value="Balance Off">Balance Off</option>
                                                                    <option value="Balance Off Negative">Balance Off Negative</option>
                                                                    <option value="Error">Error</option>
                                                                    <option value="Pending Refund">Pending Refund</option>
                                                                    <option value="Sale">Sale</option>
                                                                    <option value="Loss">Loss</option>
                                                                </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                   
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="field-4" class="control-label">Value</label>
                                                            <input  name='cardvalue' type="text" class="form-control" id="field-4" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="field-5" class="control-label">Cost</label>
                                                            <input name='cost' type="text" class="form-control" id="field-5" required>
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>
                                        </form>
                                        {% endfor %}

                                        <div class="modal-footer">
                                            <button type="submit" form="form1" id="mySubmit" value="Submit" class="btn btn-info waves-effect waves-light">Submit</button>
                                            <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal">Close</button>
                                        </div>
                                    
    
                                    </div>
                                </div>
                            </div>
                            <div class="float-right modal-cusm">
                                    <button type="button" class="btn btn-success waves-effect waves-light" data-toggle="modal" data-target="#con-close-modal">Add Gift Card</button>
                                </div>
                        </div>
                    </div>



                    <!-- Add payment trasaction details -->
						<div class="row">
							<div id="con-close-modal-1" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">Add Payment details</h4>
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
										</div>
										<form id="payment_form" action="/creditcarddetail" method="post">
                                            <div class="modal-body p-4">

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="payment-select" class="control-label">Payment Type </label>
                                                            <select class="selectpicker" id="payment-select" name="payment_type" required>
                                                                <option value="">Select Type</option>
                                                                <option value="cc">Credit Card</option>
                                                                <option value="bk">Bank</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                   
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input type="hidden" name="transactionid_batchid" value="{{batchtransaction_id}},{{batchlist_orderNo}},{{batchid}}">
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- for credit card detail start -->

                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group"  id="cc_digit" style="display:none">
                                                                <label for="add_payment_type_digit" class="control-label">Card #  </label>
                                                                <input type="text" pattern="\d*" name="payment_type_digit" class="form-control" id="add_payment_type_digit" placeholder="60152013651653 ">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group" id="cc_issuer" style="display:none">
                                                                <label for="issuer_type" class="control-label">Card Type</label>
                                                                <input type="text" name="issuer_type" class="form-control" id="issuer_type" placeholder="VISA ">
                                                            </div>
                                                        </div>
                                                    </div>

                                                <!-- credit card detail end -->

                                                <!-- for bank detail start -->
                                                <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group"  id="bk_digit" style="display:none">
                                                                <label for="add_bank_digit" class="control-label">Account # </label>
                                                                <input type="text" pattern="\d*" name="add_bank_digit" class="form-control" id="add_bank_digit" placeholder="60152013651653 "> 
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6"> 
                                                            <div class="form-group" id='bk_name' style="display:none">
                                                                <label for="bank_name" class="control-label">Account Name</label>
                                                                <input type="text" name="bank_name" class="form-control" id="bank_name" placeholder="BOFA "> 
                                                            </div>
                                                        </div>
                                                            
                                                    </div>
                                                
                                                <!-- for bank detail end -->
                                            </div>
										</form>
                                        <div class="modal-footer">
                                            <button id="reset" onclick= 'reset_add_payment()' class="btn btn-info waves-effect waves-light">Reset</button>
                                            <button type="submit" form = 'payment_form' class="btn btn-info waves-effect waves-light">Submit</button>
                                        </div>
									</div>
								</div>
							</div>
						</div>

						<!-- Edit credit card payment trasaction details -->
						<div class="row">
							<div id="con-close-modal-2" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">Update Payment details</h4>
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
										</div>
                                        <form id="edit_payment_form" action="/creditcarddetail" method="PUT">
                                            
                                            <div class="modal-body p-4">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="payment-select" class="control-label">Payment Type </label>
                                                            <select class="selectpicker" id="payment-select" name="payment_type" disabled="disabled">
                                                                <option value="">Select Type</option>
                                                                <option selected>Credit Card</option>
                                                                <option value="bk">Bank</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input type="hidden" name="transactionid" id="edit_payment_id">
                                                            <input type="hidden" name="payment_type" value="cc">
                                                            <input type="hidden" name="batchid" value="{{batchid}}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="edit_payment_type_digit" class="control-label">Card # </label>
                                                            <input type="text" pattern="\d*" name="payment_type_digit" class="form-control" id="edit_payment_type_digit" placeholder="60152013651653 " required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="edit_issuer_type" class="control-label">Card Type</label>
                                                            <input type="text" name="issuer_type" class="form-control" id="edit_issuer_type" placeholder="VISA " required>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="reset" class="btn btn-info waves-effect waves-light">Reset</button>
                                                <button type="submit" class="btn btn-info waves-effect waves-light">Update</button>
                                            </div>
										</form>
									</div>
								</div>
							</div>
                        </div>
                        
                        <!-- Edit bank payment trasaction details -->
						<div class="row">
							<div id="con-close-modal-3" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">Update Payment details</h4>
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
										</div>
                                        <form id="edit_bank_payment_form" action="/creditcarddetail" method="PUT">    
                                            <div class="modal-body p-4">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="payment-select" class="control-label">Payment Type </label>
                                                            <select class="selectpicker" id="payment-select" name="payment_type" disabled="disabled">
                                                                <option value="">Select Type</option>
                                                                <option value="cc">Credit Card</option>
                                                                <option selected>Bank</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input type="hidden" name="transactionid" id="edit_bank_payment_id">
                                                            <input type="hidden" name="payment_type" value="bank">
                                                            <input type="hidden" name="batchid" value="{{batchid}}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="edit_bank_digit" class="control-label">Account # </label>
                                                            <input type="text" pattern="\d*" name="edit_bank_digit" class="form-control" id="edit_bank_digit" placeholder="60152013651653 " required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6"> 
                                                        <div class="form-group">
                                                            <label for="bank_name" class="control-label">Account Name</label>
                                                            <input type="text" name="edit_bank_name" class="form-control" id="edit_bank_name" placeholder="BOFA ">
                                                        </div>
                                                    </div>
                                                   
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="reset" class="btn btn-info waves-effect waves-light">Reset</button>
                                                <button type="submit" class="btn btn-info waves-effect waves-light">Update</button>
                                            </div>
										</form>
									</div>
								</div>
							</div>
						</div>

                </div>     
                  <!-- end page title -->

                  <!-- /.modal -->
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="card-box">

                                    <!-- Logo & title -->
                        <div class="clearfix">
                            {% for  bdata in batchlist_data %}
                            <div class="float-left">
                                <h4>{{bdata.vendor}}</h4>
                            </div>
                            <div class="float-right mt-1">
                                <p class="m-b-10"><strong>Batch # :  &nbsp;&nbsp;</strong> <span id = 'pdforderno'> {{bdata.orderNo}}</span></p>
                                <p class="m-b-10"><strong>Date of Purchase : </strong> <span>{{bdata.date_of_purchase}}</span></p>
                            </div>
                            {% endfor %}
                        </div>

                           <div class="form-inline mb-2">
                              <!-- /btn-group -->
                              <div class="form-group mr-2">    
                                 <button type="button" id="Delete" onclick='deleteRow()'  class="btn btn-danger waves-effect waves-light btn-block ">Delete</button>
                              </div>  
                           </div>
                           <div class=" row">
                              <div class="col-md-12" style='overflow-x: auto'>
                                <table id="batchDetailTable" class="table w-100 nowrap table-bordered table-hover">
                                    <span id="showselectedbox"></span>
                                    <thead class="thead-light">
                                        <tr>
                                            <th class="no-sort"><input type="checkbox" name="check1" id="cb-bulk" class="cb-tab"></th>
                                            <th>Retailer</th>
                                            <th>Gift Card #</th>
                                            <th>Pin</th>
                                            <th>Status</th>
                                            <th>Balance</th>
                                            <th>Value</th>
                                            <th>Discount</th>
                                            <th>Cost</th>
                                        </tr>
                                    </thead>
                                </table>
                              </div>
                           </div>
                           <!-- end .table-responsive--> 
                           <div class="row">
                            <div class="col-md-6 float-left">
                                	<div class="d-print-none float-left">
                                    <p><b>Payment Type:</b> <button type="button" class="btn btn-success waves-effect waves-light" style="margin-left: 40px;" data-toggle="modal" data-target="#con-close-modal-1">Add</button></p>
                                    {% for bdata in batchlistTransaction_data %} 
                                        {% if bdata.payment_type == "Credit Card" %}
                                        <p><b>{{bdata.payment_type}} - </b> <span class="float-right">&nbsp;&nbsp;&nbsp; {{bdata.issuer_type}} - {{bdata.payment_type_digit}} <span style="cursor:pointer;" class="btnEdit" data-toggle="modal" data-target="#con-close-modal-2" data-id="{{bdata.id}}" data-payment-number="{{bdata.payment_type_digit}}" data-issuer-type="{{bdata.issuer_type}}" data-payment-type="{{bdata.payment_type}}"> <i class="icon-pencil" style="color:blue;margin-left: 10px;"></i></span> <span style="cursor:pointer;" onclick=deletePayment(id,this) id="{{bdata}}"><i class="fe-trash-2" style="color:red;margin-left: 10px;"></i></span></span></p>
                                        {% elif bdata.payment_type == "Bank" %}
                                        <p><b>{{bdata.payment_type}} - </b> <span class="float-right">&nbsp;&nbsp;&nbsp; {{bdata.issuer_type}} - {{bdata.payment_type_digit}}<span style="cursor:pointer;" class="btnEdit" data-toggle="modal" data-target="#con-close-modal-3" data-id="{{bdata.id}}" data-payment-number="{{bdata.payment_type_digit}}" data-issuer-type="{{bdata.issuer_type}}" data-payment-type="{{bdata.payment_type}}"> <i class="icon-pencil" style="color:blue;margin-left: 10px;"></i></span> <span style="cursor:pointer;" onclick=deletePayment(id,this) id="{{bdata}}"><i class="fe-trash-2" style="color:red;margin-left: 10px;"></i></span></span></p>
                                        {% endif %}
                                    {% endfor %}

                                    <!-- button for batch invoice -->

                                    <div class="d-print-none mt-3" >
                                        <button onclick='viewpdf()' class="btn mb-2 btn-info waves-effect waves-light">View Invoice</button>
                                    </div>
                                </div>
                                  
                            </div>
                            <div class="col-sm-6">
                                <div class="float-right float-rtol"> 
                                    <br>
                                    {% if giftcard_amount.0.0 != None and giftcard_amount.0.1 != None %}
                                        <p><b>Total Value: </b>{{"%.2f"|format(giftcard_amount.0.0)}}</p>
                                        {% if giftcard_amount.0.0 == 0 and giftcard_amount.0.1 == 0%}
                                        {% else %}
                                        <p><b>Discount: </b>{{"%.2f"|format(((giftcard_amount.0.0-giftcard_amount.0.1) / giftcard_amount.0.0)*100)}}%</p>
                                        {% endif %}
                                        <p><b>Total Cost: </b>{{"%.2f"|format(giftcard_amount.0.1)}}</p>
                                    {% endif %}       
                                </div>
                                <div class="clearfix"></div>
                            </div> <!-- end col -->
                        </div>
                        <!-- end row --> 
                        <!-- <div class="row">
                            <div class="col-md-12">
                                <div class="d-print-none">
                                        <button onclick='viewpdf()' class="btn mb-2 btn-info waves-effect waves-light">View Invoice</button>
                                </div>    
                            </div>
                        </div> -->
                               
                        </div>
                     </div>
                     <!-- end card-box -->
                  </div>
                  <!-- end col -->
               </div>
            </div>
            <!-- container -->
         </div>
         <!-- content -->
         <!-- Footer Start -->
         <footer class="footer">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-md-6">
                     2020 &copy; Prime Electronics, LLC
                  </div>
                  <div class="col-md-6">
                     <div class="text-md-right footer-links d-none d-sm-block">
                        <a href="javascript:void(0);">About Us</a>
                        <a href="javascript:void(0);">Help</a>
                        <a href="javascript:void(0);">Contact Us</a>
                     </div>
                  </div>
               </div>
            </div>
         </footer>
         <!-- end Footer -->
      </div>
      <!-- ============================================================== -->
      <!-- End Page content -->
      <!-- ============================================================== -->
      </div>
      <!-- END wrapper -->
      <!-- Right Sidebar -->
      <div class="right-bar">
         <div class="rightbar-title">
            <a href="javascript:void(0);" class="right-bar-toggle float-right">
            <i class="dripicons-cross noti-icon"></i>
            </a>
            <h5 class="m-0 text-white">Settings</h5>
         </div>
         <div class="slimscroll-menu">
            <!-- User box -->
            <div class="user-box">
               <div class="user-img">
                  <img src="static/images/users/user-1.jpg" alt="user-img" title="Mat Helme" class="rounded-circle img-fluid">
                  <a href="javascript:void(0);" class="user-edit"><i class="mdi mdi-pencil"></i></a>
               </div>
               <h5><a href="javascript: void(0);">Geneva Kennedy</a> </h5>
               <p class="text-muted mb-0"><small>Admin Head</small></p>
            </div>
            <!-- Settings -->
            <hr class="mt-0" />
            <h5 class="pl-3">Basic Settings</h5>
            <hr class="mb-0" />
            <div class="p-3">
               <div class="checkbox checkbox-primary mb-2">
                  <input id="Rcheckbox1" type="checkbox" checked>
                  <label for="Rcheckbox1">
                  Notifications
                  </label>
               </div>
               <div class="checkbox checkbox-primary mb-2">
                  <input id="Rcheckbox2" type="checkbox" checked>
                  <label for="Rcheckbox2">
                  API Access
                  </label>
               </div>
               <div class="checkbox checkbox-primary mb-2">
                  <input id="Rcheckbox3" type="checkbox">
                  <label for="Rcheckbox3">
                  Auto Updates
                  </label>
               </div>
               <div class="checkbox checkbox-primary mb-2">
                  <input id="Rcheckbox4" type="checkbox" checked>
                  <label for="Rcheckbox4">
                  Online Status
                  </label>
               </div>
               <div class="checkbox checkbox-primary mb-0">
                  <input id="Rcheckbox5" type="checkbox" checked>
                  <label for="Rcheckbox5">
                  Auto Payout
                  </label>
               </div>
            </div>
            <!-- Timeline -->
            <hr class="mt-0" />
            <h5 class="px-3">Messages <span class="float-right badge badge-pill badge-danger">25</span></h5>
            <hr class="mb-0" />
            <div class="p-3">
               <div class="inbox-widget">
                  <div class="inbox-item">
                     <div class="inbox-item-img"><img src="static/images/users/user-2.jpg" class="rounded-circle" alt=""></div>
                     <p class="inbox-item-author"><a href="javascript: void(0);" class="text-dark">Tomaslau</a></p>
                     <p class="inbox-item-text">I've finished it! See you so...</p>
                  </div>
                  <div class="inbox-item">
                     <div class="inbox-item-img"><img src="static/images/users/user-3.jpg" class="rounded-circle" alt=""></div>
                     <p class="inbox-item-author"><a href="javascript: void(0);" class="text-dark">Stillnotdavid</a></p>
                     <p class="inbox-item-text">This theme is awesome!</p>
                  </div>
                  <div class="inbox-item">
                     <div class="inbox-item-img"><img src="static/images/users/user-4.jpg" class="rounded-circle" alt=""></div>
                     <p class="inbox-item-author"><a href="javascript: void(0);" class="text-dark">Kurafire</a></p>
                     <p class="inbox-item-text">Nice to meet you</p>
                  </div>
                  <div class="inbox-item">
                     <div class="inbox-item-img"><img src="static/images/users/user-5.jpg" class="rounded-circle" alt=""></div>
                     <p class="inbox-item-author"><a href="javascript: void(0);" class="text-dark">Shahedk</a></p>
                     <p class="inbox-item-text">Hey! there I'm available...</p>
                  </div>
                  <div class="inbox-item">
                     <div class="inbox-item-img"><img src="static/images/users/user-6.jpg" class="rounded-circle" alt=""></div>
                     <p class="inbox-item-author"><a href="javascript: void(0);" class="text-dark">Adhamdannaway</a></p>
                     <p class="inbox-item-text">This theme is awesome!</p>
                  </div>
               </div>
               <!-- end inbox-widget -->
            </div>
            <!-- end .p-3-->
         </div>
         <!-- end slimscroll-menu-->
      </div>
      <!-- /Right-bar -->
      <!-- Right bar overlay-->
      <div class="rightbar-overlay"></div>
      <!-- Vendor js -->
      <script src="static/js/vendor.min.js"></script>

      <script>
          function reset_add_payment(){

            document.getElementById('add_payment_type_digit').value = '';
            document.getElementById('issuer_type').value = '';

            document.getElementById('add_bank_digit').value = '';
            document.getElementById('bank_name').value = '';

          }
      </script>

      <script>
		$(".btnEdit").bind("click", function(element){
			var edit_data = element.currentTarget.dataset;
            if (edit_data.paymentType == "Credit Card"){
                $("#edit_payment_type_digit").val(edit_data.paymentNumber);
                $("#edit_issuer_type").val(edit_data.issuerType);
                $("#edit_payment_id").val(edit_data.id);
            }else if(edit_data.paymentType == "Bank"){
                $("#edit_bank_name").val(edit_data.issuerType);
                $("#edit_bank_digit").val(edit_data.paymentNumber);
                $("#edit_bank_payment_id").val(edit_data.id);
            }else{
                $("#edit_payment_type_digit").val(edit_data.paymentNumber);
                $("#edit_issuer_type").val(edit_data.issuerType);
                $("#edit_payment_id").val(edit_data.id);
            }
            
		});

           
	</script>

      <script type="text/javascript">
		var editfrm = $('#edit_payment_form');
		editfrm.submit(function (e) {
			e.preventDefault();
			$.ajax({
				type: editfrm.attr('method'),
				url: editfrm.attr('action'),
				data: editfrm.serialize(),
				success: function (data) {
					console.log('Submission was successful.');
					console.log(data);
					closemodal();
					showSnackbar(data);
					setTimeout(function(){
							location.reload();
						  },1000)
				},
				error: function (data) {
					console.log('An error occurred.');
					console.log(data);
					closemodal();
					showSnackbar(data);
					setTimeout(function(){
							location.reload();
						  },1000)
				},
			});
		});
    </script>
    
    <script type="text/javascript">
		var editbankfrm = $('#edit_bank_payment_form');
		editbankfrm.submit(function (e) {
			e.preventDefault();
			$.ajax({
				type: editbankfrm.attr('method'),
				url: editbankfrm.attr('action'),
				data: editbankfrm.serialize(),
				success: function (data) {
					console.log('Submission was successful.');
					console.log(data);
					closemodal();
					showSnackbar(data);
					setTimeout(function(){
							location.reload();
						  },1000)
				},
				error: function (data) {
					console.log('An error occurred.');
					console.log(data);
					closemodal();
					showSnackbar(data);
					setTimeout(function(){
							location.reload();
						  },1000)
				},
			});
		});
	</script>
	<script type="text/javascript">
		var payfrm = $('#payment_form');
		payfrm.submit(function (e) {
			e.preventDefault();
			$.ajax({
				type: payfrm.attr('method'),
				url: payfrm.attr('action'),
				data: payfrm.serialize(),
				success: function (data) {
					console.log('Submission was successful.');
					console.log(data);
					closemodal();
					showSnackbar(data);
					setTimeout(function(){
							location.reload();
						  },1000)
				},
				error: function (data) {
					console.log('An error occurred.');
					console.log(data);
					closemodal();
					showSnackbar(data);
					setTimeout(function(){
							location.reload();
						  },1000)
				},
			});
		});
    </script>
    
    <script type="text/javascript">
        function closemodal(){
                 // get modals
                 const modals = document.getElementsByClassName('modal');
 
                 // on every modal change state like in hidden modal
                 for(let i=0; i<modals.length; i++) {
                    modals[i].classList.remove('show');
                    modals[i].setAttribute('aria-hidden', 'true');
                    modals[i].setAttribute('style', 'display: none');
                 }
        }
     </script>


      

<!------- toast functionality  ------->     
<script>
    function showSnackbar(text) {
    var x = document.getElementById("snackbar");
    x.innerHTML = text;
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ''); }, 3000);
    }
</script>

<!-- !-- checkbox functionality ------------> 
 <script type="text/javascript">
   $(document).on("click", "#cb-bulk", function(){
      $(".cb-single").prop("checked", $(this).prop("checked"));
      if($(this).prop("checked")) {
         let total_checked =  "Youâ€™ve Selected "+ $(".cb-single").length + " Items"
         document.getElementById("showselectedbox").innerHTML = total_checked;
         document.getElementById("showselectedbox").style.display= 'inline';
      } else  {
         document.getElementById("showselectedbox").style.display= 'none';

      }
   });

   $(document).on("click", ".cb-single", function(){
      var all = $(".cb-single").length;

      var checked = $(".cb-single:checked").length;
      //this works for selecting each check-box
      let total_checked =  "Youâ€™ve Selected "+ checked + " Items"
      document.getElementById("showselectedbox").innerHTML = total_checked;
      document.getElementById("showselectedbox").style.display= 'inline';

      if(all == checked){
         $(".cb-tab").prop("checked", true);
      }else{
         $(".cb-tab").prop("checked", false);
         if (checked == 0){
            document.getElementById("showselectedbox").style.display= 'none';

         }

      }
   });
</script>
 


<!-- append  retailer -->
<script>
    function getRetailerSelectFilter(data, row) {
        let htmlString = '<select onchange="changeRetailer(this)" class="hd3">'+

        '<option value='+row.id+'>'+data+'</option>';

        if (data !== "Cabelas")
            htmlString = htmlString + "<option value='" + row.id +"'>Cabelas</option>";

        if (data !== "Home Depot")
            htmlString = htmlString + "<option value='" + row.id +"'>Home Depot</option>";

        if (data !== "Lowes")
            htmlString = htmlString + "<option value='" + row.id +"'>Lowes</option>";
        
        if (data !== "Walmart")
            htmlString = htmlString + "<option value='" + row.id +"'>Walmart</option>";

        if (data !== "Target")
            htmlString = htmlString + "<option value='" + row.id +"'>Target</option>";

        if (data !== "Best Buy")
            htmlString = htmlString + "<option value='" + row.id +"'>Best Buy</option>";

        if (data !== "B&N")
            htmlString = htmlString + "<option value='" + row.id +"'>B&N</option>";

        if (data !== "Toys R Us")
            htmlString = htmlString + "<option value='" + row.id +"'>Toys R Us</option>";
        
        if (data !== "Kohls")
            htmlString = htmlString + "<option value='" + row.id +"'>Kohls</option>";

        if (data !== "Sams Club")
            htmlString = htmlString + "<option value='" + row.id +"'>Sams Club</option>";

        if (data !== "DSG")
            htmlString = htmlString + "<option value='" + row.id +"'>DSG</option>";

        if (data !== "Sears")
            htmlString = htmlString + "<option value='" + row.id +"'>Sears</option>";

        if (data !== "Office Depot")
            htmlString = htmlString + "<option value='" + row.id +"'>Office Depot</option>";

        if (data !== "Staples")
            htmlString = htmlString + "<option value='" + row.id +"'>Staples</option>";

        htmlString = htmlString + '</select>';

        return htmlString;

    }
    
</script>

<!-- append status -->
<script>  
    function  getStatusSelectFilter(data, row) {
       let htmlString   =  '<select onchange="changeStatus(this)" class="hd3">'+
            '<option value='+row.id+'>'+data+'</option>';

            if (data !== "No Balance")
            htmlString = htmlString + "<option value='" + row.id +"'>No Balance</option>";

            if (data !== "Balance")
            htmlString = htmlString + "<option value='" + row.id +"'>Balance</option>";

            if (data !== "Bad")
            htmlString = htmlString + "<option value='" + row.id +"'>Bad</option>";
            
            if (data !== "Value Off")
               htmlString = htmlString + "<option value='" + row.id +"'>Value Off</option>";

            if (data !== "Refunded")
            htmlString = htmlString + "<option value='" + row.id +"'>Refunded</option>";

            if (data !== "Replaced")
            htmlString = htmlString + "<option value='" + row.id +"'>Replaced</option>";

            if (data !== "Invalid")
            htmlString = htmlString + "<option value='" + row.id +"'>Invalid</option>";

            if (data !== "Found Balance")
            htmlString = htmlString + "<option value='" + row.id +"'>Found Balance</option>";

            if (data !== "Balance Off")
            htmlString = htmlString + "<option value='" + row.id +"'>Balance Off</option>";

            if (data !== "Balance Off Negative")
               htmlString = htmlString + "<option value='" + row.id +"'>Balance Off Negative</option>";

            if (data !== "Error")
            htmlString = htmlString + "<option value='" + row.id +"'>Error</option>";

            if (data !== "Pending Refund")
            htmlString = htmlString + "<option value='" + row.id +"'>Pending Refund</option>";

            if (data !== "Loss")
            htmlString = htmlString + "<option value='" + row.id +"'>Loss</option>";

       htmlString = htmlString + '</select>';
       
       return htmlString

    }
</script>




<!-- get id from the batch detail function from flask view -->
<script>
    var batchid = '{{ batchid }}'
    console.log(batchid)
</script>

<script>
    var batchDetailTable = undefined;
    $(document).ready(function() {
        batchDetailTable = $('#batchDetailTable').DataTable({
            ordering: true,
            serverSide: true,
            searching: true,
            searchDelay: 1500, //milli seconds
             columns:[  
                        {data:"", orderable: false,
                        "render": function ( data, type, row, meta ) {
                            return '<input type="checkbox" name="check[]" value="' + row.id + '" class="cb-single">'
                            }
                        },
                        {"data": "retailler",
                        "render": function( data, type, row, meta ) {
                                    return getRetailerSelectFilter(data, row);

                                }
                        },
                        {"data": "gift_card_no",
                        "render": function ( data, type, row, meta ) {
                                 return '<a class = "removeanchortag" href="/orderhistory/'+row.id+'">'+data+'</a>'}
                                 },
                        {"data": "gift_card_pin"},
                        {"data": "status",
                        "render": function( data, type, row, meta ) {
                                    return getStatusSelectFilter(data, row);
                                }
                        },
                        {"data": "balance"},
                        {"data": "gift_card_value"},
                        {data: "discount", orderable: false,
                        "render": function( data, type, row, meta ) {
                                    return (data+'%')}
                                    },
                        {"data": "amount_paid"},
                     ],
            "ajax": {
                    'type': 'post',
                    'url': '/batchdetailDatatable',
                    'dataType': 'json',
                    "contentType": "application/json", 
                    "data": function (d) {
                            console.log(d)
                            d.batchid = batchid
                            return JSON.stringify(d)
                            },
                            
                    },

                     "drawCallback": function() {
                        //make checkbox display header none
                        document.getElementById("showselectedbox").style.display= 'none';
                        //make uppercheckbox none
                        $(".cb-tab").prop("checked", false);

                //         let valueArray = batchDetailTable.column(6).data()
                //         var totalvalue = valueArray.reduce(function(a, b){
                //                                         return a + b;
                //                                       }, 0);
                        
                //         console.log(totalvalue)
                //         document.getElementById('totalval').innerHTML = totalvalue.toFixed(2); 


                //         let costArray = batchDetailTable.column(8).data()
                //         var totalcost = costArray.reduce(function(a, b){
                //                                         return a + b;
                //                                       }, 0);
                        
                //         console.log(totalcost)
                //         document.getElementById('totalcos').innerHTML = totalcost.toFixed(2); 

                //         var totaldiscount = ((totalvalue - totalcost)/totalvalue*100)
                //         console.log(totaldiscount)
                //         document.getElementById('totaldis').innerHTML = totaldiscount.toFixed(2)+ '%'; 


                //         //discount = round((final_value - final_cost)/final_value*100, 2) 


                 }
            

        });


        //code for making the cell editable 
            //https://datatables.net/reference/api/cell().data()
            $('#batchDetailTable tbody').on( 'click', 'td', function (ev) {

               
                $('.removeanchortag').contents().unwrap();


                $('#batchDetailTable td:not(:first-child,:nth-child(2),:nth-child(5),:nth-child(8))').editable( function( sValue, settings ) {
                    

                    /* Get the position of the current data from the node */
                    var aPos = oTable.fnGetPosition( this );
                    
                    /* Get the data array for this row */
                    var aData = oTable.fnGetData( aPos[0] );
                    
                    /* Update the data array and return the value */
                    aData[ aPos[1] ] = sValue;

                    // call this code only when previous value(prev val contain in this.revert) is not equal to current new value after change
                    if (this.revert !== sValue) {
                        // **UPDATE CODE TO CALL API TO UPDATE IN DATABASE**
                        const cellIndex =  this.cellIndex; // used to identify cell - which cell is clicked
                        // set column list to get cell name by index
                        columnlist = [
                            "checkbox",
                            "retailler",
                            "gift_card_no",
                            "gift_card_pin",
                            "status",
                            "balance",
                            "gift_card_value",
                            "discount",
                            "amount_paid",
                        
                        ]
                        const cellName = columnlist[cellIndex]; // name of the column which is updated
                        const id = aData.id; // get id of this row toidentify row
                        const newValue = sValue; // new value of the coulmn updated by user from input
                        const updateValue = { "cellName":cellName, "id":id, "newValue":newValue };

                        $.ajax({
                            type: "put",
                            url: "/updategiftcard",
                            data: JSON.stringify(updateValue),
                            success: function(d) {
                                console.log('Success', d);
                                if (d.column =='gift_card_no') {var x = 'giftcard no.'} else if (d.column =='gift_card_pin') {var x = 'giftcard pin'} else if (d.column =='balance') {var x = 'balance'}else if (d.column =='no_of_orders') {var x = 'no of orders'} else if (d.column =='gift_card_value') {var x = 'giftcard value'} else if (d.column =='amount_paid') {var x = 'cost'} else {var x = d.column }
                                showSnackbar(x+' updated')
                            },
                            dataType: 'json',
                            contentType: "application/json"
                        });
                        // **API CODE END**
                    }
                    return sValue;
                }, { "onblur": 'submit' } ); /* Submit the form when bluring a field */

                /* Init DataTables */
                oTable = $('#batchDetailTable').dataTable();

            });

    });    
</script>

<!-- function for updating the retailer -->
<script>
    function changeRetailer(selectedObject) {
            //id of the selected retailer
            var id = selectedObject.value;
            //name of the retailer
            var selectedRetailer =  selectedObject.options[selectedObject.selectedIndex].text;
            console.log(id)
            console.log(selectedRetailer)

            const updateValue = { "cellName":"retailler", "id":id, "newValue":selectedRetailer };
            // call API here to update date in database
            $.ajax({
                type: "put",
                url: "/updategiftcard",
                data: JSON.stringify(updateValue),
                success: function(d) {
                    //console.log('Success', d);
                    showSnackbar('retailer updated')
                },
                dataType: 'json',
                contentType: "application/json"
            });
            // **API CODE END**
        }
</script>

<!-- function for updating the status ----->
<script>
    function changeStatus(selectedObject) {
            //id of the selected retailer
            var id = selectedObject.value;
            //name of the retailer
            var selectedStatus =  selectedObject.options[selectedObject.selectedIndex].text;
            console.log(id)
            console.log(selectedStatus)

            const updateValue = { "cellName":"status", "id":id, "newValue":selectedStatus };
            // call API here to update date in database
            $.ajax({
                type: "put",
                url: "/updategiftcard",
                data: JSON.stringify(updateValue),
                success: function(d) {
                    //console.log('Success', d);
                    showSnackbar('status updated')
                },
                dataType: 'json',
                contentType: "application/json"
            });
            // **API CODE END**
        }
</script>


<!-- function for deleting the row -->
<script>
       
   function deleteRow(){
      var checkboxes = document.getElementsByName("check[]");
      var checkboxesArray = [];
      var trSelectorArray = [];
      // loop over them all
      for (var i=0; i<checkboxes.length; i++) {
         // And stick the checked ones onto an array...
         if (checkboxes[i].checked) {
            checkboxesArray.push(checkboxes[i].value);
            const id = checkboxes[i].value;

            const tr = checkboxes[i].parentElement.parentElement;
            trSelectorArray.push(tr);
         }
      }
 
      if(checkboxesArray.length !== 0){

                var data = {"checkboxesArray":checkboxesArray}
                // console.log(data)
                swal({
                  title: "Are you sure?",
                  text: "Once deleted, you will not be able to recover this data!",
                  icon: "warning",
                  buttons: true,
                  dangerMode: true,
               }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                                type: "DELETE",
                                url: "/deletegiftcardrows",
                                data: JSON.stringify(data),
                                success: function(d) {
                                    console.log('Success', d);
                                    // remove row from view
                                    batchDetailTable.rows(trSelectorArray).remove().draw(false);
                                    //make checkbox display header none
                                    document.getElementById("showselectedbox").style.display= 'none';
                                    //make uppercheckbox none
                                    $(".cb-tab").prop("checked", false);
                                    if(checkboxesArray.length == 1){
                                        showSnackbar(checkboxesArray.length + " item is deleted");
                                    }else{
                                        showSnackbar(checkboxesArray.length + " items are deleted");
                                    }
                                 
                                },
                                dataType: 'json',
                                contentType: "application/json"
                         });

                     }

                })

            }else{
               showSnackbar("Please select at least one item.");
           }

   }
   //-------------------------function end deleting row --------------------//
</script>

<!-- loader functionality -->
<script>
    function showLoader(){
       $('#cover-spin').show(0);
       
    }
    function hideLoader(){
       $('#cover-spin').hide(0)
       
    }
 </script>


<script>
    function viewpdf(){
        var batchorderno = document.getElementById('pdforderno').innerText
        var b_order = {'batchorderno': batchorderno}
        console.log(b_order)
        showLoader()
        $.ajax({
                type: "post",
                url: "/batchlistftppdf",
                data: JSON.stringify(b_order),
                success: function(d) {
                    console.log('Success', d);
                    hideLoader()
                    if (d.code == 400) {
							showSnackbar("Invoice does not exist")
						} else {
                            window.open('static/batchpdf/'+d.data)
                        }
                },
                dataType: 'json',
                contentType: "application/json"
            })
    }
</script>


<!-- function for checking that giftcard no. already exists on manually adding giftcard -->
<script>
    function changeCardno(selectCardno){
        console.log(selectCardno)

        //getting a selected giftcard cost
       var selectedCardno = selectCardno.value;
       console.log(selectedCardno)
       var data = {"selectedCardno":selectedCardno}


        //---------Ajax Call---------//
    
       //Initialize xhr request
       var xhr = new XMLHttpRequest();
    
       //open xhr object
       //open(method, url, async)
       xhr.open("POST", '/giftcardnoexist', true);
    
       xhr.setRequestHeader("Content-type", "application/json;charset=UTF-8");
       xhr.send(JSON.stringify(data))

       xhr.onreadystatechange = function() {
       if (xhr.readyState == 4 &&  xhr.status == 200) {
             console.log(xhr.responseText);
             console.log(typeof(xhr.responseText));
 
             var response = JSON.parse(xhr.responseText)
             console.log(response)
             
             if (response.code == "409"){
                document.getElementById('giftcardno').style.visibility = "visible"
                document.getElementById('giftcardno').innerHTML = "Already Exist GiftCard No."
                document.getElementById("mySubmit").disabled = true;
                }
            else{
                document.getElementById('giftcardno').style.visibility = "hidden"
                document.getElementById("mySubmit").disabled = false;
                }
            }
       };

    }
</script>

<!-- //-------------------------function for deleting payment method --------------------// -->

	<script>
	function deletePayment(id, el) {

		var data = {
			"transaction_data": id
		}
		swal({
			title: "Are you sure?",
			text: "Once deleted, you will not be able to recover this data!",
			icon: "warning",
			buttons: true,
			dangerMode: true,
		}).then((willDelete) => {
			if (willDelete) {
				const payment_row = el.parentElement.parentElement;
				$.ajax({
					type: "DELETE",
					url: "/creditcarddetail",
					data: JSON.stringify(data),
					dataType: 'json',
					contentType: "application/json",
					success: function(d) {
						console.log('Success', d);
						// remove row from view
						if (d.code == 400) {
							showSnackbar("can't deleted")
						} else {
						    payment_row.remove();
						    setTimeout(function(){
								location.reload();
							  },1000)
						}
					},
					error: function(xhr, ajaxOptions, thrownError) {
						swal("Error deleting!", "Please try again", "error");
					}
				});
			}
		});
    }

</script>

<script>
    $('#payment-select').on('change',function(){
          var selection = $(this).val();
             switch(selection){
          case "cc":
            $("#cc_issuer").show()
            $("#cc_digit").show()
            $("#bk_name").hide()
            $("#bk_digit").hide()
            $("#identi").hide()
            document.getElementById("issuer_type").required = true;
            document.getElementById("add_payment_type_digit").required = true;
            document.getElementById("add_bank_digit").required = false;
            document.getElementById("bank_name").required = false;


            break;
          case "bk":
            $("#bk_name").show()
            $("#bk_digit").show()
            $("#identi").show()

            $("#cc_issuer").hide()
            $("#cc_digit").hide()
            document.getElementById("add_bank_digit").required = true;
            document.getElementById("bank_name").required = true;
            document.getElementById("issuer_type").required = false;
            document.getElementById("add_payment_type_digit").required = false;
            break;
          default:
            $("#cc_issuer").hide()
            $("#cc_digit").hide()

            $("#bk_name").hide()
            $("#bk_digit").hide()
            $("#identi").hide()
          }
   });
</script>

<script type="text/javascript">
	setTimeout(function(){
	if($(".no-sort").hasClass("sorting_asc")){
		$(".no-sort").removeClass("sorting_asc");
	}},2000)
 </script>
 

    
    
{% endblock %}
